<template>
  <div class="GetStarted">
    <!-- Simple-Component -->
    <div class="code-block Simple-Component">
      <h1>${"simpleComp".trans()}</h1>
    </div>
    <!-- Quick-Start -->
    <div class="code-block Quick-Start">
      <h1>${"quickStart".trans()}</h1>
    </div>
  </div>
</template>

<script>
  import hljs from "highlight.js";
  import marked from "marked";
  import { Origin, debug, $ } from "olum";
  export default class GetStarted {
    getStartedArr = ["Simple-Component", "Quick-Start"]; // md files & classes to be rendered in the home page
    version = "master";
    data() {
      return {
        name: "GetStarted",
        components: {},
        template: this.template(),
        style: this.style(),
        render: this.render.bind(this),
      };
    }

    render() {
      this.origin = new Origin();
      this.recursive();
    }

    recursive(num = 0) {
      // select stuff
      const fileName = this.getStartedArr[num];
      const url = "https://raw.githubusercontent.com/olumjs/olum/" + this.version + "/docs/" + fileName + ".md";
      const container = $(`.GetStarted .${fileName}`);
      // fetch docs
      this.origin
        .get(url)
        .then(res => {
          if (container) container.insertAdjacentHTML("beforeend", marked(res));
          if (num + 1 <= this.getStartedArr.length - 1) this.recursive(num + 1);
          if (num === this.getStartedArr.length - 1) hljs.highlightAll(); // highlight after finishing all requests & dom injection
        })
        .catch(console.error);
    }
  }
</script>

<style lang="scss">
  .GetStarted {
    margin-bottom: 50px;
    h1 {
      text-align: center;
      font-size: 1.5rem;
      font-weight: 400;
      color: $mainTextColor;
      margin: 0 0 20px;
    }

    .code-block {
      padding-top: 50px;
    }
  }
</style>
